#!/bin/bash
clear
trap '' 2
dialog --clear --backtitle "Debian MATE Installation Type" --title "Choose Installation type:" --menu "Please select:" 10 45 3 1 "Minimal Installation 1.5GB" 2 "Full Installation 4GB" 2>temp
install-chromium() {
apt-get chromium -yy
sed -i 's/chromium %U/chromium --no-sandbox %U/g' /usr/share/applications/chromium.desktop
}

# OK is pressed
if [ "$?" = "0" ]
then
        _return=$(cat temp)
 
        # Minimal is selected
        if [ "$_return" = "1" ]
        then
      		echo 'Installing Minimal System '
	  	sleep 4
    		apt-get install mate-desktop-environment-core mate-terminal tightvncserver -y
		dpkg --configure -a
		read -p "What to install chromium browser ? (y/n) [ Chromium might not work on arm/arm32/armhf devices ] " choice
		case "$choice" in 
		  y|Y ) install-chromium ;;
		  n|N ) echo "Ok... Not installing Chromium";;
		  * ) echo "invalid";;
		esac
        fi
 
         # Full is selected
        if [ "$_return" = "2" ]
        then
             echo 'Installing Full System '
	     sleep 4
             apt-get install mate-desktop-environment-core mate-terminal tightvncserver xfe gimp neofetch libreoffice task-mate-desktop -y
	     dpkg --configure -a
        fi
 # Cancel is pressed
else
        echo "Cancel is pressed, Restarting The Menu......"
	sleep 3
	dialog --menu "Choose Installation type:" 10 40 3 1 "Minimal Installation 1.5GB" 2 "Full Installation 4GB" 2>temp
fi
 
# remove the temp file
rm -f temp
trap 2
apt-get clean
